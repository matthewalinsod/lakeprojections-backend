<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lake Projections Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body data-dam="{{ active_dam or '' }}" data-subpage="{{ active_subpage or '' }}" data-page="{{ active_page or '' }}">

<header>
    <div class="site-title-band">
        <h1>Lake Projections</h1>
        <div id="weather-widget" class="weather-widget" aria-live="polite" data-city="{{ weather_city }}">
            <span class="weather-city">{{ weather_city }}</span>
            <span class="weather-status">Loading weather…</span>
        </div>
    </div>

    <nav class="site-nav" aria-label="Primary">
        <ul id="site-nav-list" class="site-nav-list">
            <li class="nav-item">
                <a class="nav-link {% if active_page == 'home' %}active{% endif %}" href="{{ url_for('home') }}">Home</a>
            </li>
            {% for lake_slug, lake_data in lakes.items() %}
                <li class="nav-item has-dropdown {% if active_lake == lake_slug %}active-top{% endif %}">
                    <div class="nav-lake-row">
                        <a class="nav-link {% if active_lake == lake_slug %}active{% endif %}" href="{{ url_for('lake_overview', lake_slug=lake_slug) }}">{{ lake_data.lake_name }}</a>
                        <button type="button" class="nav-dropdown-toggle" aria-expanded="false" aria-label="Toggle {{ lake_data.lake_name }} menu"><span aria-hidden="true">▾</span></button>
                    </div>

                    <ul class="dropdown-menu" aria-label="{{ lake_data.lake_name }} sections">
                        {% for page_key, page_name in subpages.items() %}
                            <li>
                                <a
                                    class="dropdown-link {% if active_lake == lake_slug and active_subpage == page_key %}active{% endif %}"
                                    href="{{ url_for('lake_subpage', lake_slug=lake_slug, subpage=page_key) }}"
                                >
                                    {{ page_name }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    </nav>

    <div class="breadcrumb-wrap" aria-label="Breadcrumb">
        <nav class="breadcrumb">
            <a href="{{ url_for('home') }}">Home</a>
            {% if active_page == 'dam' and active_lake and active_subpage %}
                <span class="breadcrumb-sep">&gt;</span>
                <a href="{{ url_for('lake_overview', lake_slug=active_lake) }}">{{ lakes[active_lake].lake_name }}</a>
                <span class="breadcrumb-sep">&gt;</span>
                <span aria-current="page">{{ subpages[active_subpage] }}</span>
            {% endif %}
        </nav>
    </div>
</header>

<main class="main-content-shell">
    <aside class="ad-zone ad-zone-left" aria-hidden="true"></aside>
    <section class="main-content-container">
        <div class="main-content">
            {% block content %}{% endblock %}
        </div>
    </section>
    <aside class="ad-zone ad-zone-right" aria-hidden="true"></aside>
</main>

<script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

<script src="{{ url_for('static', filename='js/api.js') }}"></script>
<script src="{{ url_for('static', filename='js/charts.js') }}"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='js/nav.js') }}"></script>
<script src="{{ url_for('static', filename='js/weather.js') }}"></script>

</body>
</html>
